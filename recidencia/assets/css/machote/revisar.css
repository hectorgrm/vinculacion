/* =========================================================
   Residencias · Machote · revisión.css
   (Estilos del foro de revisión: comentarios, detalle, KPIs)
   Reusa variables de dashboard.css (colores, radios, sombras)
   ========================================================= */

/* ---------- Layouts base ---------- */
.kpis{
  display:grid;
  grid-template-columns:repeat(4,minmax(0,1fr));
  gap:16px;
  margin-bottom:16px;
}
.kpi{
  background:var(--panel);
  border:1px solid var(--border);
  border-radius:var(--radius-xl);
  padding:16px;
  box-shadow:var(--shadow-sm);
}
.kpi h4{
  font-size:14px;
  color:var(--muted);
  margin-bottom:6px;
}
.kpi .kpi-num{
  font-size:28px;
  font-weight:800;
  line-height:1;
}

.kpi.wide{
  grid-column:span 2 / span 2;
}
.progress{
  width:100%;
  height:10px;
  background:#eef2f7;
  border-radius:999px;
  overflow:hidden;
}
.progress .bar{
  height:100%;
  background:var(--primary);
}

.approvals{
  display:flex;
  align-items:center;
  justify-content:flex-end;
  gap:14px;
}

/* ---------- Switch / Aprobaciones ---------- */
.switch{
  display:flex;
  align-items:center;
  gap:10px;
  user-select:none;
}
.switch input[type="checkbox"]{
  display:none;
}
.switch .slider{
  width:44px;
  height:24px;
  background:#e5e7eb;
  border-radius:999px;
  position:relative;
  transition:background .2s ease;
}
.switch .slider::after{
  content:"";
  position:absolute;
  top:3px; left:3px;
  width:18px; height:18px;
  background:#fff;
  border-radius:999px;
  transition:transform .2s ease;
  box-shadow:0 1px 2px rgba(2,6,23,.12);
}
.switch input[type="checkbox"]:checked + .slider{
  background:var(--primary);
}
.switch input[type="checkbox"]:checked + .slider::after{
  transform:translateX(20px);
}
.switch .label{
  font-size:14px;
  color:var(--ink);
}

/* ---------- Badges & Pills ---------- */
.badge{
  padding:3px 8px;
  border-radius:999px;
  font-size:12px;
  font-weight:700;
  display:inline-block;
}
.badge.en_revision{ background:#f0f6ff; color:#1f6feb; }
.badge.ok{ background:#e7f8ef; color:#0f9d58; }
.badge.pendiente{ background:#fff5d6; color:#b45309; }

.badge.abierto{ background:#fff5d6; color:#b45309; }
.badge.resuelto{ background:#e7f8ef; color:#0f9d58; }

.pill{
  display:inline-block;
  padding:2px 8px;
  border-radius:999px;
  font-size:12px;
  font-weight:700;
  margin-right:8px;
}
.pill.admin{ background:#e8edff; color:#2743ff; }
.pill.empresa{ background:#e7f8ef; color:#0f9d58; }

/* ---------- Sección de “Nuevo comentario” ---------- */
.grid-2{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:16px;
}
.grid-2 .full{
  grid-column:1/3;
}
.grid-2 label{
  font-weight:600;
  display:block;
  margin-bottom:6px;
}
.grid-2 input[type="text"],
.grid-2 input[type="file"],
.grid-2 textarea{
  width:100%;
  padding:10px 12px;
  border:1px solid var(--border);
  border-radius:10px;
  font-size:15px;
}
.grid-2 textarea{ resize:vertical; }
.grid-2 input:focus,
.grid-2 textarea:focus{
  outline:2px solid var(--primary);
  border-color:transparent;
}

/* ---------- Lista / Detalle (split) ---------- */
.split{
  display:grid;
  grid-template-columns: 1fr 1.2fr;
  gap:16px;
  margin-top:16px;
}

/* Lista de comentarios */
.threads{
  display:flex;
  flex-direction:column;
  gap:12px;
}
.thread{
  border:1px solid var(--border);
  background:var(--panel);
  border-radius:12px;
  padding:12px;
  transition:border-color .2s ease, box-shadow .2s ease;
}
.thread:hover{
  border-color:#cbd5e1;
  box-shadow:var(--shadow-sm);
}
.thread.active{
  outline:2px solid #dbeafe;
}
.thread .meta{
  display:flex;
  gap:8px;
  align-items:center;
  margin-bottom:6px;
  color:var(--muted);
  font-size:13px;
}
.thread h4{
  margin-bottom:4px;
  font-size:16px;
}
.thread p{
  color:var(--ink);
  font-size:14px;
}
.thread .row-actions{
  display:flex;
  gap:8px;
  margin-top:8px;
}

/* Chips filtros */
.filters{ display:flex; gap:8px; }
.chip{
  display:inline-block;
  padding:6px 10px;
  border:1px solid var(--border);
  border-radius:999px;
  font-size:13px;
  color:var(--ink);
  text-decoration:none;
  background:#fff;
}
.chip.active{
  background:#eef2f7;
  border-color:#cbd5e1;
  font-weight:600;
}

/* Estado vacío */
.empty{
  text-align:center;
  padding:24px 12px;
  color:var(--muted);
  border:1px dashed var(--border);
  border-radius:12px;
  background:#fff;
}

/* Detalle del comentario */
.thread-detail .message{
  border:1px solid var(--border);
  border-radius:12px;
  padding:12px;
  margin-bottom:12px;
  background:#fff;
}
.thread-detail .message .head{
  display:flex;
  align-items:center;
  gap:10px;
  margin-bottom:6px;
  font-size:13px;
  color:var(--muted);
}
.thread-detail .files a{
  font-size:14px;
  text-decoration:underline;
}

/* Responder */
.reply{
  border-top:1px dashed var(--border);
  padding-top:12px;
  margin-top:12px;
}
.reply label{
  font-weight:600;
  display:block;
  margin-bottom:6px;
}
.reply textarea{
  width:100%;
  padding:10px 12px;
  border:1px solid var(--border);
  border-radius:10px;
  font-size:15px;
  resize:vertical;
}
.reply .row{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:10px;
  margin-top:10px;
}
.reply input[type="file"]{
  border:1px dashed var(--border);
  border-radius:10px;
  padding:8px;
  background:#fff;
}

/* ---------- Botones utilitarios pequeños ---------- */
.btn.small{
  padding:6px 10px;
  font-size:13px;
  border-radius:10px;
}
.btn.danger{
  background:var(--danger);
  border-color:var(--danger);
  color:#fff;
}
.btn.success{
  background:var(--accent);
  border-color:var(--accent);
  color:#fff;
}

/* ---------- Responsivo ---------- */
@media (max-width: 1024px){
  .split{
    grid-template-columns:1fr;
  }
  .kpi.wide{
    grid-column:auto;
  }
}
@media (max-width: 768px){
  .kpis{
    grid-template-columns:1fr 1fr;
  }
  .approvals{
    justify-content:flex-start;
    flex-wrap:wrap;
  }
  .grid-2{
    grid-template-columns:1fr;
  }
  .grid-2 .full{
    grid-column:auto;
  }
}
